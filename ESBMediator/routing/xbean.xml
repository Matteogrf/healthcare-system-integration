<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:eip="http://servicemix.apache.org/eip/1.0" xmlns="http://xbean.org/schemas/spring/1.0"
	xmlns:wsb="http://schemas.microsoft.com/LiveSearch/2008/03/Search"
	xmlns:tns="http://it.unitn/">


	<!-- Processo la richiesta inviata al Web Service Endpoint, la trasformo, 
		la invio al BingImage Search Web service, trasformo la risposta , salvo la 
		risposta trasformata in un file e rispondo al client -->
		
	<eip:static-routing-slip service="tns:processEventRequest"
		endpoint="staticRouting">
		<eip:targets>
			<eip:exchange-target service="tns:beanLogEvent"
				endpoint="LogEvent" operation="logContent" />			
		</eip:targets>
	   
	</eip:static-routing-slip>
	
	<eip:content-based-router service="tns:contentBaseRouter"
		endpoint="endpoint">
		<eip:rules>
			<eip:routing-rule>
				<eip:predicate>
					<!-- Evento Inserimento Variazione Anagrafica  -->
					<eip:xpath-predicate xpath="//EventNotificationRequest[Description/TipoEventoCod=1]"/>
				</eip:predicate>
				<eip:target>
					<eip:exchange-target service="tns:mapInserimentoVariazioneAnagrafica" />
				</eip:target>
			</eip:routing-rule>
		</eip:rules>
	</eip:content-based-router>
	
	

</beans>

